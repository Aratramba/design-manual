@mixin code-button {
  border: 1px solid $grey;
  border-radius: 3px;
  padding: 6px 8px;
  margin-left: 5px;
  display: inline-block;
  transition: background-color .15s;
}


/**
 * Displays a component
 * 
 * Nested this inside `.component`
 * to compensate for `.content h1` styling (see _content.scss).
 */

@keyframes pace-spinner {
  0% { 
    transform: rotate(0deg); 
    transform: rotate(0deg); 
  }
  100% { 
    transform: rotate(360deg); 
    transform: rotate(360deg); 
  }
}

.component {
  padding-bottom: 50px;
  margin-top: 50px;
}

.component__title {
  margin-bottom: 5px;
}

.component__description {
  margin-bottom: 1em;
  margin-bottom: 5px;
}

.component__404 {
  background-color: lightyellow;
  border: 1px solid $grey;
  margin: 0 0 -150px;
  padding: 10px;
  display: inline-block;
  border-radius: 3px;
  color: #333;
}


/**
 * Meta (buttons)
 */

.component__meta {
  border-top: 1px solid $grey;
  text-align: right;
  font-size: 11px;
  margin-top: 12px;
  margin-bottom: 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;

  &:before {
    content: '';
    position: relative;
    top: -5px;
    width: 30px;
    height: 5px;
    background-color: $primary;
    display: block;
  }
}

.component__meta__link {
  @include code-button;
  display: inline-block;
  vertical-align: top;
  padding-top: 4px;
  padding-bottom: 4px;

  svg {
    fill: red;
    width: 16px;
    height: 16px;
    display: block;
    fill: $grey;
    opacity: .4;
    transition: opacity .15s;
  }

  &:hover {
    svg {
      opacity: 1;
    }
  }
}

.component__meta__toggle {
  @include code-button;
  cursor: pointer;

  &:hover {
    background-color: $grey;
  }

  &:before {
    content: '';
    width: 12px;
    height: 9px;
    margin-right: 5px;
    display: inline-block;
    vertical-align: middle;
    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDEyIDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMuNTU0IDYuOTkzbC0uMzEuMzFjLS4wNDIuMDQyLS4wOS4wNjMtLjE0NC4wNjMtLjA1MyAwLS4xLS4wMi0uMTQyLS4wNjJMLjA2MiA0LjQxQy4wMjIgNC4zNjYgMCA0LjMyIDAgNC4yNjVjMC0uMDU0LjAyLS4xMDIuMDYyLS4xNDNsMi44OTYtMi44OTZjLjA0LS4wNC4wOS0uMDYyLjE0Mi0uMDYyLjA1NCAwIC4xMDIuMDIuMTQzLjA2MmwuMzEuMzFjLjA0Mi4wNDIuMDYzLjA5LjA2My4xNDQgMCAuMDU1LS4wMi4xMDItLjA2Mi4xNDRMMS4xMTIgNC4yNjZsMi40NDIgMi40NGMuMDQuMDQzLjA2Mi4wOS4wNjIuMTQ0IDAgLjA1NC0uMDIuMTAyLS4wNjIuMTQzek03LjIyNi4zNjNMNC45MSA4LjM4NmMtLjAxOC4wNTQtLjA1LjA5NC0uMDk4LjEyLS4wNDcuMDI4LS4wOTYuMDMzLS4xNDYuMDE3bC0uMzg1LS4xMDZjLS4wNTMtLjAxNi0uMDkzLS4wNS0uMTItLjA5Ni0uMDI3LS4wNDgtLjAzMi0uMS0uMDE2LS4xNTJMNi40NjIuMTQ2Yy4wMTYtLjA1NC4wNS0uMDk0LjA5Ni0uMTIuMDQ4LS4wMjguMDk2LS4wMzMuMTQ2LS4wMTdsLjM4NS4xMDVjLjA1My4wMTcuMDk0LjA1LjEyLjA5Ni4wMjcuMDUuMDMzLjEuMDE2LjE1NHptNC4wODIgNC4wNDZMOC40MTMgNy4zMDNjLS4wNDIuMDQtLjA5LjA2Mi0uMTQzLjA2Mi0uMDU0IDAtLjEwMi0uMDItLjE0My0uMDYybC0uMzEtLjMxYy0uMDQyLS4wNDItLjA2My0uMDktLjA2My0uMTQ0IDAtLjA1NC4wMi0uMS4wNjItLjE0M2wyLjQ0Mi0yLjQ0LTIuNDQyLTIuNDQzYy0uMDQtLjA0Mi0uMDYyLS4wOS0uMDYyLS4xNDMgMC0uMDUzLjAyLS4xLjA2Mi0uMTQybC4zMS0uMzFjLjA0Mi0uMDQyLjA5LS4wNjMuMTQ0LS4wNjMuMDU0IDAgLjEuMDIuMTQzLjA2MmwyLjg5NSAyLjg5NmMuMDQyLjA0LjA2Mi4wOS4wNjIuMTQzIDAgLjA1My0uMDIuMS0uMDYyLjE0M3oiIGZpbGw9IiM2NjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==) no-repeat top center;
  }
}


/**
 * Code snippets
 */

.component__code {
  display: none;
  width: 100%;
  border: 1px solid $grey;
}

/**
 * Iframe that holds the component
 */

.component__preview {
  position: relative;
  max-width: 100%;
  min-width: 275px;
  padding-right: 24px;
  border: 1px solid $grey;

  &.is-resizing {
    .component__preview__handle {
      background-color: #f5f5f5;
      border-color: $grey;

      svg {
        opacity: .5;
      }
    }
  }

  .is-loading & {
    &:before {
      content: '';
      display: block;
      position: absolute;
      top: 12px;
      left: 12px;
      width: 14px;
      height: 14px;
      border: solid 2px transparent;
      border-top-color: $primary;
      border-left-color: $primary;
      border-radius: 10px;
      animation: pace-spinner 400ms linear infinite;
    }
  }

  .has-error & {
    &:before {
      content: '!';
      display: block;
      position: absolute;
      top: 12px;
      left: 12px;
      color: white;
      width: 20px;
      height: 20px;
      text-align: center;
      line-height: 14px;
      font-size: 13px;
      font-weight: 600;
      border-radius: 50%;
      padding: 3px;
      background-color: crimson;
    }
  }
}

.component__preview__handle {
  display: block;
  position: absolute;
  width: 24px;
  height: 100%;
  right: 0;
  top: 0;
  bottom: 0;
  transition: background-color .15s, border-color .15s;
  border-left: 1px solid transparent;

  &:hover {
    background-color: #f5f5f5;
    border-color: $grey;

    svg {
      opacity: .5;
    }
  }

  svg {
    display: block;
    width: 6px;
    height: 23px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: .25;
    transition: opacity .15s;
  }
}

.component__preview__iframe {
  width: 100%;
  opacity: 0;
  transition: opacity .5s;

  &.loaded {
    opacity: 1;
  }
}


/**
 * Toggle
 */

.component__toggle {
  display: none;
}

.component__toggle:checked ~ .component__code {
  display: block;
}

.component__toggle:checked ~ .component__preview {
  display: none;
}

.component__toggle:checked ~ .component__meta .component__meta__toggle {
  background-color: $grey;
}